function addKeyValue(t,a,e){t[a]=e}let products=[];const xhr=new XMLHttpRequest;xhr.onload=function(){let t="";if(200===this.status)try{products=JSON.parse(this.responseText),console.log("products",products),$.each(products.items,function(a,e){addKeyValue(e,"amount",0),t+='<div class="product_box">',t+='    \t\t\t<div class="product_discount">',t+='    \t\t\t\t<div class="product_discount_box">',t+='    \t\t\t\t\t<div class="discount_title">'+e.discount+" %off</div>",t+="    \t\t\t\t</div>",t+="    \t\t\t</div>",t+='    \t\t\t<div class="product_image">',t+='    \t\t\t\t<img src="'+e.image+'" class="img-responsive" />',t+="    \t\t\t</div>",t+='    \t\t\t<div class="product_details">',t+='    \t\t\t\t<div class="product_name">'+e.name+"</div>",t+='\t    \t\t\t<div class="product_price">',t+='\t    \t\t\t\t<div class="product_actual_price">',t+='\t    \t\t\t\t\t<del class="cut_price"><span class="product_discount_price">$'+e.price.display+"</span></del>",t+='\t    \t\t\t\t\t<span class="product_discount_price">$'+e.price.actual+"</span>",t+='                            <button class="add_to_cart"  onClick=handleAddToCart("'+e.id+'")>Add to cart</button>',t+="\t    \t\t\t\t</div>",t+="\t    \t\t\t\t",t+="\t    \t\t\t</div>",t+="\t    \t\t</div>",t+="    \t\t</div>"}),$("#productList").html(t)}catch(t){console.log("There was an error in the JSON")}else console.warn("Did nor receive 200 OK from response");showCartItem()},xhr.open("get","data.json"),xhr.send();let cart=[];const handleAddToCart=t=>{if(cart.find(a=>a.id===t))return cart.map(a=>{a.id===t&&(a.amount=a.amount+1),showCartItem()});products.items.map(a=>{if(a.id==t){a.id=t,a.name=a.name,a.image=a.image,a.actual=a.price.actual,a.display=a.price.display;let e={};e={id:a.id,name:a.name,image:a.image,actual:a.actual,display:a.display,amount:1},cart.push(e),$("#success_msg").html('<span class="success_box">'+a.name+" is added to cart</span>"),setTimeout(function(){document.getElementById("success_msg").innerHTML=""},2e3)}}),console.log("cartcartcart",cart),showCartItem()};function showCartItem(){let t=0,a=0,e=0,s=0;if(cart.length>0){let d="";d+="<table>",d+="\t<tr>",d+="\t\t<th>Items</th>",d+="\t\t<th>Qty</th>",d+="\t\t<th>Price</th>",d+="\t</tr>",$.each(cart,function(c,i){let r=0;r=i.amount*i.actual,a+=r,t+=r,cartItemCount=i.amount,e+=cartItemCount,cartItemDiscount=i.amount*(i.display-i.actual),s+=cartItemDiscount,d+="<tr>",d+="\t<td>",d+='\t\t<div class="item_box">',d+='\t\t\t<div class="item_img">',d+='\t\t\t\t<img src="'+i.image+'" class="img-responsive" />',d+='\t\t\t\t<span class="cart_item_name">'+i.name+"</span>",d+='               <span class="cart_item_clear increase_cart_item"  onClick=handleRemoveItemFromCart("'+i.id+'")>X</span>',d+="\t\t\t</div>",d+="\t\t</div>",d+="\t</td>",d+="\t<td>",d+='\t\t<div class="cart_qty">',d+='                    <button class="decrease_cart_item"  onClick=handleRemoveFromCart("'+i.id+'")>-</button>',d+='\t\t\t\t\t <span class="cart_item_count">'+i.amount+"</span>",d+='                    <button class="increase_cart_item"  onClick=handleAddToCart("'+i.id+'")>+</button>',d+="\t\t</div>",d+="\t</td>",d+="\t<td>",d+='\t\t<div class="cart_item_price">$'+r.toFixed(2)+"</div>",d+="\t</td>",d+="</tr>"}),d+="\t\t\t</table>",d+='<div class="total_amount_box">',d+="\t<table>",d+="\t\t<tr>",d+="\t\t\t<th>Total</th>",d+="\t\t\t<td></td>",d+="\t\t\t<td></td>",d+="\t\t</tr>",d+="\t\t<tr>",d+='\t\t\t<th>Items(<span id="totalCartItem">'+e+"</span>)</th>",d+="\t\t\t<td>:</td>",d+='\t\t\t<td id="cartTotlaCost">$'+a.toFixed(2)+"</td>",d+="\t\t</tr>",d+="\t\t<tr>",d+="\t\t\t<th>Discount</th>",d+="\t\t\t<td>:</td>",d+='\t\t\t<td id="totalCartItemDiscount">-$'+s.toFixed(2)+"</td>",d+="\t\t</tr>",d+="\t\t<tr>",d+="\t\t\t<th>Type Discount</th>",d+="\t\t\t<td>:</td>",d+="\t\t\t<td>-$0</td>",d+="\t\t</tr>",d+='\t\t<tr class="grand_amt">',d+='\t\t\t<div class="order_total">',d+="\t\t\t\t<th>Order Total</th>",d+="\t\t\t\t<td>:</td>",d+='\t\t\t\t<td id="grandTotal">$'+t.toFixed(2)+"</td>",d+="\t\t\t</div>",d+="\t\t</tr>",d+="\t</table>",d+="</div>",$("#cartItem").html(d)}else $("#cartTotlaCost").html("$"+a.toFixed(2)),$("#totalCartItemDiscount").html("-$"+s.toFixed(2)),$("#grandTotal").html("$"+t.toFixed(2)),$("#totalCartItem").html(e),$("#cartItem").html("<p>No Items in cart</p>")}const handleRemoveFromCart=t=>{if(cart.find(a=>a.id===t))return cart.map(a=>{a.id===t&&(0===a.amount?cart=cart.filter(a=>a.id!==t):a.amount=a.amount-1,showCartItem())})},handleRemoveItemFromCart=t=>{cart=cart.filter(a=>a.id!==t),showCartItem()};