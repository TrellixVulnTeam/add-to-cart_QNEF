function addKeyValue(t,a,e){t[a]=e}let products=[];const xhr=new XMLHttpRequest;xhr.onload=function(){let t="";if(200===this.status)try{products=JSON.parse(this.responseText),console.log("products",products),$.each(products.items,function(a,e){addKeyValue(e,"amount",0),t+='<div class="product_box">',t+='    \t\t\t<div class="product_discount">',t+='    \t\t\t\t<div class="product_discount_box">',t+='    \t\t\t\t\t<div class="discount_title">'+e.discount+" %off</div>",t+="    \t\t\t\t</div>",t+="    \t\t\t</div>",t+='    \t\t\t<div class="product_image">',t+='    \t\t\t\t<img src="'+e.image+'" class="img-responsive" />',t+="    \t\t\t</div>",t+='    \t\t\t<div class="product_details">',t+='    \t\t\t\t<div class="product_name">'+e.name+"</div>",t+='\t    \t\t\t<div class="product_price">',t+='\t    \t\t\t\t<div class="product_actual_price">',t+='\t    \t\t\t\t\t<del class="cut_price"><span class="product_discount_price">$'+e.price.display+"</span></del>",t+='\t    \t\t\t\t\t<span class="product_discount_price">$'+e.price.actual+"</span>",t+='                            <button class="add_to_cart"  onClick=handleAddToCart("'+e.id+'")>Add to cart</button>',t+="\t    \t\t\t\t</div>",t+="\t    \t\t\t\t",t+="\t    \t\t\t</div>",t+="\t    \t\t</div>",t+="    \t\t</div>"}),$("#productList").html(t)}catch(t){console.log("There was an error in the JSON")}else console.warn("Did nor receive 200 OK from response");showCartItem()},xhr.open("get","data.json"),xhr.send();let cart=[];const handleAddToCart=t=>{if(cart.find(a=>a.id===t))return cart.map(a=>{a.id===t&&(a.amount=a.amount+1),showCartItem()});products.items.map(a=>{if(a.id==t){a.id=t,a.name=a.name,a.image=a.image,a.actual=a.price.actual,a.display=a.price.display;let e={};e={id:a.id,name:a.name,image:a.image,actual:a.actual,display:a.display,amount:1},cart.push(e)}}),console.log("cartcartcart",cart),showCartItem()};function showCartItem(){let t=0,a=0,e=0,d=0;if(cart.length>0){let c="";c+="<table>",c+="\t<tr>",c+="\t\t<th>Items</th>",c+="\t\t<th>Qty</th>",c+="\t\t<th>Price</th>",c+="\t</tr>",$.each(cart,function(i,s){let r=0;r=s.amount*s.actual,a+=r,t+=r,cartItemCount=s.amount,e+=cartItemCount,cartItemDiscount=s.amount*(s.display-s.actual),d+=cartItemDiscount,c+="<tr>",c+="\t<td>",c+='\t\t<div class="item_box">',c+='\t\t\t<div class="item_img">',c+='\t\t\t\t<img src="'+s.image+'" class="img-responsive" />',c+='\t\t\t\t<span class="cart_item_name">'+s.name+"</span>",c+='               <span class="cart_item_clear increase_cart_item"  onClick=handleRemoveItemFromCart("'+s.id+'")>X</span>',c+="\t\t\t</div>",c+="\t\t</div>",c+="\t</td>",c+="\t<td>",c+='\t\t<div class="cart_qty">',c+='                    <button class="decrease_cart_item"  onClick=handleRemoveFromCart("'+s.id+'")>-</button>',c+='\t\t\t\t\t <span class="cart_item_count">'+s.amount+"</span>",c+='                    <button class="increase_cart_item"  onClick=handleAddToCart("'+s.id+'")>+</button>',c+="\t\t</div>",c+="\t</td>",c+="\t<td>",c+='\t\t<div class="cart_item_price">$'+r.toFixed(2)+"</div>",c+="\t</td>",c+="</tr>"}),c+="\t\t\t</table>",c+='<div class="total_amount_box">',c+="\t<table>",c+="\t\t<tr>",c+="\t\t\t<th>Total</th>",c+="\t\t\t<td></td>",c+="\t\t\t<td></td>",c+="\t\t</tr>",c+="\t\t<tr>",c+='\t\t\t<th>Items(<span id="totalCartItem">'+e+"</span>)</th>",c+="\t\t\t<td>:</td>",c+='\t\t\t<td id="cartTotlaCost">$'+a.toFixed(2)+"</td>",c+="\t\t</tr>",c+="\t\t<tr>",c+="\t\t\t<th>Discount</th>",c+="\t\t\t<td>:</td>",c+='\t\t\t<td id="totalCartItemDiscount">-$'+d.toFixed(2)+"</td>",c+="\t\t</tr>",c+="\t\t<tr>",c+="\t\t\t<th>Type Discount</th>",c+="\t\t\t<td>:</td>",c+="\t\t\t<td>-$0</td>",c+="\t\t</tr>",c+='\t\t<tr class="grand_amt">',c+='\t\t\t<div class="order_total">',c+="\t\t\t\t<th>Order Total</th>",c+="\t\t\t\t<td>:</td>",c+='\t\t\t\t<td id="grandTotal">$'+t.toFixed(2)+"</td>",c+="\t\t\t</div>",c+="\t\t</tr>",c+="\t</table>",c+="</div>",$("#cartItem").html(c)}else $("#cartTotlaCost").html("$"+a.toFixed(2)),$("#totalCartItemDiscount").html("-$"+d.toFixed(2)),$("#grandTotal").html("$"+t.toFixed(2)),$("#totalCartItem").html(e),$("#cartItem").html("<p>No Items in cart</p>")}const handleRemoveFromCart=t=>{if(cart.find(a=>a.id===t))return cart.map(a=>{a.id===t&&(0===a.amount?cart=cart.filter(a=>a.id!==t):a.amount=a.amount-1,showCartItem())})},handleRemoveItemFromCart=t=>{cart=cart.filter(a=>a.id!==t),showCartItem()};